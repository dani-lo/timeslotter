define(["backbone","underscore","lib/ts"],function(a,b,c){"use strict";var d=a.View.extend({el:".timeslotter-form",events:{"click .form-submit":"onSubmit"},initialize:function(a){return this.text=null,this.select=null,this.flash=c.getFlash(),this.onSubmitCb=a.onSubmit,this},render:function(){this.text=this.$(".timeslotter-form_text"),this.select=this.$(".timeslotter-form_select"),this.text.on("click, focus",b.bind(function(){this.cleanup("t")},this)),this.select.on("click, focus",b.bind(function(){this.cleanup("s")},this))},cleanup:function(a){"t"!==a&&a||this.text.removeClass("err"),"s"!==a&&a||this.select.removeClass("err")},reset:function(){this.text.val(""),this.select[0].selectedIndex=0,this.cleanup()},validate:function(){var a=!0;return this.cleanup(),""===this.text.val()&&(this.text.addClass("err"),a=!1),0===this.select[0].selectedIndex&&(this.select.addClass("err"),a=!1),a},fieldsVal:function(){return{name:this.text.val(),type:this.select.val()}},lock:function(){this.$el.addClass("form-locked")},unlock:function(){this.$el.removeClass("form-locked")}});return d});