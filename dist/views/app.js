define(["backbone","underscore","views/partials/timeslot/display","views/partials/timeslot/create","lib/slotshub","text!/templates/timeslots.html"],function(a,b,c,d,e,f){"use strict";var g=a.View.extend({el:".timeslotter",initialize:function(){return this.tpl=f,this.hub=new e,this},render:function(){this.$el.append(this.tpl),this.hub.fetchSlots().then(b.bind(function(a){b.each(a,b.bind(function(a){this.appendTimeslot(a)},this))},this));var a=new d({owner:this});a.render()},appendTimeslot:function(a,b){var d=new c({slotsData:a});b?this.$el.find(".view-slots").append(d.render()):this.$el.find(".view-slots").append(d.render())}});return g});